<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8"/>
		<script type="text/javascript" src="index.js"></script>
		<link rel="stylesheet" type="text/css" href="index.css"/>
		<title>-= Заголовок страницы =-</title>
	</head>
	<body>
		<header>
			<H1>RGB Light Controller</H1>
		</header>



		<div class="contentBox" id="contentBox">
			<div id="controlBox" class="hidden">
				<div class="header">Modes</div>
				<div class="block flex wrap" id="modesBox"></div>
				
				<div class="header">Control</div>
				<div class="block">
					<div class="string hidden" lang="3">
						<div class="string">
							<text>Master color</text><input type="color" name="masterColor" value="#' + rgbToHex( app.data.effects.masterColor ) + '" onChange="changeEffect( this );">
						</div>
					</div>
					<div class="string hidden" lang="4">
						
					</div>
				</div>
				
			</div>
			
			<div id="effectsBox" class="hidden">
				<div class="header">Effects</div>
				<div class="block">
					<div class="string">
						<text>Rainbow speed</text>
						<input type="number" name="rainbow_speed" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Rainbow step</text>
						<input type="number" name="rainbow_step" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire speed</text>
						<input type="number" name="fire_speed" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire step</text>
						<input type="number" name="fire_step" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire HUE GAP</text>
						<input type="number" name="fire_hue_gap" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire HUE start</text>
						<input type="number" name="fire_hue_start" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire brightness min</text>
						<input type="number" name="fire_min_bright" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire brightness max</text>
						<input type="number" name="fire_max_bright" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire saturation min</text>
						<input type="number" name="fire_min_sat" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Fire saturation max</text>
						<input type="number" name="fire_max_sat" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Pulse speed</text>
						<input type="number" name="pulse_speed" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
					<div class="string">
						<text>Pulse step</text>
						<input type="number" name="pulse_step" min="0" max="255" size="4" onChange="changeEffect( this );">
					</div>
				</div>
			</div>

			<div id="zonesBox" class="hidden">
				<div class="header">Zones</div>
				<div class="block"></div>
			</div>

			<div id="settingsBox" class="hidden">
				<div class="header">Connection</div>
				<div class="block">
					<div class="string">
						<text>IP:</text>
						<input type="text" name="tHost" onChange="saveValueToStorage( this.name, this.value );">
					</div>
					<div class="string">
						<text>PORT:</text>
						<input type="number" min="1" max="65535" value="81" size="5" name="tPort" onChange="saveValueToStorage( this.name, this.value );">
					</div>
					<div class="string">
						<text>STATUS:</text>
						<text id="conStatL" style="font-size: 10pt;"></text>
					</div>
					<div class="string">
						<text>Memory:</text>
						<i id="memoryStatus"></i>
					</div>
				</div>

				<div class="header">IO</div>
				<div class="block" id="ioConfigureBlock"></div>
			</div>
			<div>
				Created by <a href="http://drsmyrke.ru" target="_blank">Dr.Smyrke</a>
			</div>
		</div>




		<footer>
			<!-- <div class="button" onClick="openPage( this.lang );" lang="/monitor">
				<svg role="img" focusable="false" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M24 10c0-6.5-5-10-12-10S0 3.5 0 10s5 9.971 11 9.971v2.559c0 .507 0 .76.159 1.008.11.173.376.368.574.423.283.078.47.02.845-.096C18 22 24 16.5 24 10zm-6-3v2H6V7h12zm-4 4H6v2h8v-2z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
				<text id="button1Text"></text>
			</div> -->
			<div class="button" onClick="openPage( this.lang );" lang="/control">
				<svg role="img" focusable="false" fill="" width="24" height="24" viewBox="0 0 24 24"><path d="M18.596 4.082c.84-.378 1.7.483 1.323 1.322l-6.682 14.85c-.395.878-1.68.746-1.888-.193l-1.21-5.444a1 1 0 00-.76-.759L3.94 12.651c-.939-.208-1.07-1.493-.193-1.888l14.85-6.681z"></path></svg>
				<text>Control</text>
			</div>
			<div class="button" onClick="openPage( this.lang );" lang="/zones">
				<svg role="img" focusable="false" fill="" width="24" height="24" viewBox="0 0 24 24"><path d="M23 4.22c0-1.139 0-1.708-.225-2.142a2 2 0 00-.853-.853C21.488 1 20.919 1 19.78 1h-5.17c-.57 0-.854 0-1.071.113a1 1 0 00-.426.426C13 1.756 13 2.041 13 2.61v6.78c0 .57 0 .854.113 1.071a1 1 0 00.426.426c.217.113.502.113 1.071.113h6.78c.57 0 .854 0 1.071-.113a1 1 0 00.426-.426C23 10.244 23 9.959 23 9.39V4.22zM11 2.61c0-.57 0-.854-.113-1.071a1 1 0 00-.426-.426C10.244 1 9.959 1 9.39 1H4.22c-1.139 0-1.708 0-2.142.225a2 2 0 00-.853.853C1 2.512 1 3.081 1 4.22v10.17c0 .57 0 .854.113 1.071a1 1 0 00.426.426C1.756 16 2.041 16 2.61 16h6.78c.57 0 .854 0 1.071-.113a1 1 0 00.426-.426c.113-.217.113-.502.113-1.071V2.61zm0 17c0-.57 0-.854-.113-1.071a1 1 0 00-.426-.426C10.244 18 9.959 18 9.39 18H2.333c-.31 0-.465 0-.592.034a1 1 0 00-.707.707C1 18.868 1 19.023 1 19.333c0 .62 0 1.93.068 2.185a2 2 0 001.414 1.414c.255.068.565.068 1.185.068H9.39c.57 0 .854 0 1.071-.113a1 1 0 00.426-.426c.113-.217.113-.502.113-1.071v-1.78zm12-5c0-.57 0-.854-.113-1.071a1 1 0 00-.426-.426C22.244 13 21.959 13 21.39 13h-6.78c-.57 0-.854 0-1.071.113a1 1 0 00-.426.426C13 13.756 13 14.041 13 14.61v6.78c0 .57 0 .854.113 1.071a1 1 0 00.426.426c.217.113.502.113 1.071.113h5.17c1.139 0 1.708 0 2.142-.225a2 2 0 00.853-.853C23 21.488 23 20.919 23 19.78v-5.17z"></path></svg>
				<text>Zones</text>
			</div>
			<div class="button" onClick="openPage( this.lang );" lang="/effects">
				<svg role="img" focusable="false" fill="" width="24" height="24" viewBox="0 0 24 24"><path d="M4 4.633a1.367 1.367 0 100 2.734 1.367 1.367 0 000-2.734zM8 5h12v2H8V5zm12 6H8v2h12v-2zm0 6H8v2h12v-2zM2.633 12a1.367 1.367 0 112.734 0 1.367 1.367 0 01-2.734 0zM4 16.633a1.367 1.367 0 100 2.734 1.367 1.367 0 000-2.734z"></path></svg>
				<text>Effects</text>
			</div>
			<div class="button" onClick="openPage( this.lang );" lang="/settings">
				<svg role="img" focusable="false" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M10 2h4v2.252a7.992 7.992 0 013.73 2.166L20 5l2 3.5-2.273 1.42A8.01 8.01 0 0120 12a8.01 8.01 0 01-.273 2.08L22 15.5 20 19l-2.27-1.418A7.992 7.992 0 0114 19.748V22h-4v-2.252a7.992 7.992 0 01-3.73-2.166L4 19l-2-3.5 2.273-1.42A8.01 8.01 0 014 12c0-.72.095-1.416.273-2.08L2 8.5 4 5l2.269 1.418A7.992 7.992 0 0110 4.252V2zm2 13.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
				<text>Settings</text>
			</div>
		</footer>

		<script>
		//-----------------------------------------------------------------------------
		function makeHttpObject()
		{
			try {return new XMLHttpRequest();}

			catch (error) {}
			try {return new ActiveXObject('Msxml2.XMLHTTP');}
			catch (error) {}

			try {return new ActiveXObject('Microsoft.XMLHTTP');}
			catch (error) {}
			throw new Error('Could not create HTTP request object.');
		}
		//-----------------------------------------------------------------------------
		function printLocation()
		{
			if( app.debug ) console.info( 'printLocation >:', document.location.href, document.location.pathname );
		}
		//-----------------------------------------------------------------------------
		function CheckBit( reg, bit ) 
		{
			reg = Number( reg );
			bit = Number( bit );
			return ( ( reg & (1<<bit ) ) != 0 ) ? 1 : 0;
		}
		//-----------------------------------------------------------------------------
		function setBit( reg, bit, value ) 
		{
			reg = Number( reg );
			bit = Number( bit );
			value = Number( value );
			if( value ){
				reg |= (1<<bit);
			}else{
				reg &= ~(1<<bit);
			}
			return reg;
		}
		//-----------------------------------------------------------------------------
		function show( box = '' )
		{
			if( app.debug ) console.log( 'hide >:', box, app.openPath );
			let obj = document.getElementById( box );
			if( obj == undefined ){
				console.error( 'contentBox undefined' );
				return undefined;
			}
			obj.classList.remove( 'hidden' );
			return obj;
		}
		//-----------------------------------------------------------------------------
		function hide( box = '' )
		{
			if( app.debug ) console.log( 'hide >:', box, app.openPath );
			let obj = document.getElementById( box );
			if( obj == undefined ) return console.error( 'contentBox undefined' );
			obj.classList.add( 'hidden' );
			// Если созданный объект временный удаляем его из памяти
			if( obj.lang == 't' ) obj.remove();
		}
		//-----------------------------------------------------------------------------

		//========================================================================================================
		class Storage{debug;storage;constructor(t=!0,e=!1){this.debug=e,this.storage=t?sessionStorage:localStorage}getStorageData(t="",e="{}"){if(this.debug&&console.log("getStorageData",this.storage,t),""==t)return;let r=this.storage.getItem(t);return this.debug&&console.log("getStorageData",t),null==r&&(r=e),this.JSON_Parse(r)}saveToStorage(t="",e="",r,o="{}"){if(this.debug&&console.log("saveToStorage",this.storage,t,e,r,o),""==t||""==e)return;let s=this.getStorageData(t,o),a=!1;for(let g in s)if(void 0==r){if(s[g]==e){a=!0;break}}else if(g==e){"object"==typeof s&&(s[g]=this.copyObject(r)),a=!0;break}a||("object"==typeof s?void 0==r?s=this.copyObject(e):s[e]=this.copyObject(r):"array"==typeof s&&s.push(e)),this.storage.setItem(t,JSON.stringify(s)),this.debug&&console.log("saveToStorage >:",this.storage,t,e,r)}removeFromStorage(t="",e="",r){if(this.debug&&console.log("removeFromStorage >:",this.storage,t,e,r),""==t||""==e)return;let o=this.getStorageData(t);"object"==typeof o?"*"==e?o="elements"==t?[]:{}:delete o[e]:"array"==typeof o&&o.splice(Number(e),1),this.storage.setItem(t,JSON.stringify(o)),this.debug&&console.log("removeFromStorage >:",this.storage,t,e,r)}copyObject(t={}){this.debug&&console.log("copyObject",t);try{t=JSON.stringify(t)}catch(e){t=JSON.stringify({})}try{t=JSON.parse(t)}catch(r){t=JSON.parse("{}")}return t}JSON_Parse(t="{}"){this.debug&&console.log("JSON_Parse",t);let e;try{e=JSON.parse(t)}catch(r){e=JSON.parse("{}")}return e}}
		//========================================================================================================
		</script>
</body></html>